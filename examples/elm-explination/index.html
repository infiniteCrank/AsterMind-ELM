<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Extreme Learning Machine — JS Engineer Primer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    :root{
      --bg:#050c1f; --panel:#0b1633; --ink:#e5efff; --muted:#a7b8e8; --accent:#5ad1ff; --good:#6ee7a2; --warn:#facc15; --bad:#fb7185;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 700px at 50% -200px,#0b1633 0%,#050c1f 55%,#020614 100%);
      color:var(--ink); font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    }
    .app{display:flex; flex-direction:column; min-height:100vh;}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 16px; background:linear-gradient(180deg,rgba(90,209,255,0.12),rgba(90,209,255,0.0));
      border-bottom:1px solid #13244f;
    }
    header h1{font-size:1.05rem; margin:0; font-weight:600; letter-spacing:0.2px}
    .nav{ display:flex; gap:8px; }
    button{
      background:#102043; color:var(--ink); border:1px solid #1f3570; border-radius:10px; padding:8px 12px; cursor:pointer;
    }
    button:hover{background:#12265a}
    button[disabled]{opacity:.6; cursor:not-allowed}
    main{flex:1; display:flex; justify-content:center; padding:16px}
    .slide{
      width:min(1100px,100%); display:grid; grid-template-columns: 1.1fr .9fr; gap:16px;
      padding:16px; background:rgba(7,16,41,0.66); border:1px solid #14244e; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.30);
    }
    .left, .right{min-height:380px; background:rgba(8,19,44,0.72); border:1px solid #182d61; border-radius:14px; overflow:hidden; position:relative}
    .panel{ padding:14px 14px 10px 14px; height:100%; display:flex; flex-direction:column; gap:10px; }
    h2{margin:0 0 6px 0; font-size:1.05rem}
    p{margin:.25rem 0; color:var(--muted); line-height:1.3}
    label{font-size:.9rem; color:var(--muted)}
    select,input[type=range]{width:100%}
    .kv{display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .chip{padding:4px 8px; border:1px solid #203a7c; border-radius:999px; font-size:.8rem; color:#bcd0ff; background:#0c1a3d}
    .canvasWrap{flex:1; border:1px dashed #253f85; border-radius:10px; overflow:hidden; background:#071332}
    canvas{display:block; width:100%; height:100%}
    .footerBar{display:flex; gap:10px; justify-content:flex-end; margin-top:8px}
    .code{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; background:#0c1a3d; border:1px solid #203a7c; border-radius:8px; padding:8px; font-size:.88rem; color:#cfe1ff; overflow:auto}
    .note{font-size:.85rem; color:#93a9e8}
    .ok{color:var(--good)} .warn{color:var(--warn)} .bad{color:var(--bad)}
    @media (max-width: 980px){
      .slide{grid-template-columns: 1fr;}
      .left,.right{min-height:300px}
    }
    [hidden] { 
      display: none !important;
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <h1>Extreme Learning Machines — A Visual Primer for JS Engineers</h1>
    <div class="nav">
      <button id="prevBtn">◀ Back</button>
      <div class="chip" id="slideLabel">Slide 1 / 4</div>
      <button id="nextBtn">Next ▶</button>
    </div>
  </header>

  <main>
    <!-- Slide 1 -->
    <section class="slide" id="slide1" hidden>
      <div class="left">
        <div class="panel">
          <h2>1) Single Neuron + Activations</h2>
          <p>Adjust <em>w</em> and <em>b</em>, choose an activation, and watch <code>y = f(w·x + b)</code> respond in real-time.</p>
          <div class="row">
            <div style="flex:1">
              <label>Activation</label>
              <select id="actSelect">
                <option value="relu">ReLU</option>
                <option value="leakyRelu">LeakyReLU</option>
                <option value="sigmoid">Sigmoid</option>
                <option value="tanh">tanh</option>
              </select>
            </div>
            <div class="chip">Live chart</div>
          </div>
          <div class="kv"><label>Weight (w)</label><span id="wVal">1.00</span></div>
          <input id="wRange" type="range" min="-5" max="5" step="0.05" value="1">
          <div class="kv"><label>Bias (b)</label><span id="bVal">0.00</span></div>
          <input id="bRange" type="range" min="-5" max="5" step="0.05" value="0">

          <div class="canvasWrap" style="height:260px">
            <canvas id="neuronCanvas"></canvas>
          </div>
          <div class="note">Uses activations implementations via the Worker (astermind.umd.js). Falls back to local versions if not present.</div>
        </div>
      </div>
      <div class="right">
        <div class="panel">
          <h2>What you’re seeing</h2>
          <p>ELM ≈ a single hidden layer network where the hidden layer is random and fixed; only the output layer is solved analytically.</p>
          <p>This slide isolates a single neuron to build intuition about activations and affine (“Affine” (pronounced uh-FEEN) is math-speak for a linear transform plus a shift.) transforms (<code>w</code>, <code>b</code>).</p>
          <div class="code">
<pre>// y = f(w·x + b)
const z = w * x + b;
const y = activation(z);</pre>
          </div>
          <p class="note">Try moving <strong>w</strong> negative and flipping between <strong>ReLU</strong> and <strong>tanh</strong> to feel different non-linearities.</p>
        </div>
      </div>
    </section>

    <!-- Slide 2 -->
    <section class="slide" id="slide2" hidden>
      <div class="left">
        <div class="panel">
          <h2>2) Input Encoding (AG-News snippet)</h2>
          <p>Pick a training row. We’ll vectorize the text (TF-IDF if available, else a simple bag-of-words) and preview the input vector magnitude.</p>
          <div class="row">
            <select id="rowSelect" style="flex:1"></select>
            <button id="encodeBtn">Encode →</button>
          </div>
          <div class="canvasWrap" style="height:260px">
            <canvas id="encodeCanvas"></canvas>
          </div>
          <div id="tokensOut" class="code" style="min-height:80px"></div>
        </div>
      </div>
      <div class="right">
        <div class="panel">
          <h2>What you’re seeing</h2>
          <p>ELM doesn’t dictate how you encode inputs. Here we use text vectors.</p>
          <ul class="note">
            <li><strong>TF-IDF/EncoderELM</strong> from your UMD, if present</li>
            <li>Fallback: simple token counts</li>
          </ul>
          <p>We stream the single vector to the next slides as <code>x</code> for hidden layer projection.</p>
        </div>
      </div>
    </section>

    <!-- Slide 3 -->
    <section class="slide" id="slide3" hidden>
      <div class="left">
        <div class="panel">
          <h2>3) Hidden Layer (Random &amp; Shuffle)</h2>
          <p>See the hidden matrix <code>W</code> (weights) and bias <code>b</code>. Shuffle reseeds the hidden layer and shows a fresh <code>W</code>.</p>
          <div class="row">
            <div style="flex:1">
              <label>Hidden size</label>
              <input id="hiddenSize" type="range" min="4" max="256" step="1" value="32">
              <div class="note"><span id="hiddenSizeVal">32</span> neurons</div>
            </div>
            <button id="shuffleBtn" title="Reseed hidden layer">Shuffle Hidden</button>
            <button id="previewHBtn" title="Project current x">Project H = g(X·W + b)</button>
          </div>
          <div class="canvasWrap" style="height:260px">
            <canvas id="hiddenCanvas"></canvas>
          </div>
          <div id="WPreview" class="code" style="min-height:80px"></div>
        </div>
      </div>
      <div class="right">
        <div class="panel">
          <h2>What you’re seeing</h2>
          <p>ELM’s “secret” is that we don’t train <code>W</code> with backprop. We randomize it once, compute <code>H = g(XW + b)</code>, then solve the output layer.</p>
          <p class="note">“Shuffle” here means: rebuild random hidden layer (new seed), so you can feel how different random projections change features.</p>
        </div>
      </div>
    </section>

    <!-- Slide 4 -->
    <section class="slide" id="slide4" hidden>
      <div class="left">
        <div class="panel">
          <h2>4) Output Layer (Pseudoinverse Solve)</h2>
          <p>We’ll fit <code>β</code> by solving <code>Hβ ≈ Y</code> with a pseudo-inverse. Then we’ll predict the class for a sample headline.</p>
          <div class="row">
            <button id="trainBtn">Train on snippet</button>
            <button id="predictBtn">Predict selected row</button>
          </div>
          <div id="solveOut" class="code" style="min-height:80px">Waiting…</div>
          <div class="canvasWrap" style="height:220px">
            <canvas id="betaCanvas"></canvas>
          </div>
        </div>
      </div>
      <div class="right">
        <div class="panel">
          <h2>What you’re seeing</h2>
          <p>Once <code>β</code> is solved (ridge/L2 if configured), inference is just:</p>
          <div class="code">
<pre>// Predict
const Hx = g(x·W + b);
const logits = Hx · β;  // class scores</pre>
          </div>
          <p class="note">We show shape/dims and a tiny heatmap of <code>β</code>. Then classify the sample row.</p>
        </div>
      </div>
    </section>
  </main>

  <div style="padding:8px 16px; display:flex; gap:8px; align-items:center; justify-content:space-between;">
    <div id="status" class="note">Worker: <span id="workerStatus">connecting…</span></div>
    <div class="footerBar">
      <button id="toOne">1</button>
      <button id="toTwo">2</button>
      <button id="toThree">3</button>
      <button id="toFour">4</button>
    </div>
  </div>
</div>

<script src="/elm-demo.js" type="module"></script>
</body>
</html>
